{"ast":null,"code":"// src/services/PatientService.js\nimport axios from \"axios\";\nconst BASE_URL = \"http://localhost:8080/api/patients\";\n\n// ✅ Get credentials from localStorage (after login)\nconst getAuthHeaders = () => {\n  const auth = localStorage.getItem(\"auth\");\n  if (!auth) {\n    throw new Error(\"No authentication found. Please log in.\");\n  }\n  return {\n    Authorization: `Basic ${auth}`,\n    \"Content-Type\": \"application/json\"\n  };\n};\n\n// ✅ Fetch patients with authentication\nexport const getPatients = async () => {\n  try {\n    const response = await axios.get(BASE_URL, {\n      headers: getAuthHeaders()\n    });\n    return response.data;\n  } catch (error) {\n    console.error(\"Error fetching patients:\", error);\n    if (error.response && error.response.status === 401) {\n      alert(\"Unauthorized. Please log in.\");\n      localStorage.removeItem(\"auth\"); // Clear invalid auth\n      window.location.href = \"/login\"; // Redirect to login\n    }\n    throw error;\n  }\n};\n\n// ✅ Delete patient with authentication\nexport const deletePatient = async id => {\n  try {\n    await axios.delete(`${BASE_URL}/${id}`, {\n      headers: getAuthHeaders()\n    });\n  } catch (error) {\n    console.error(\"Error deleting patient:\", error);\n    if (error.response && error.response.status === 401) {\n      alert(\"Unauthorized. Please log in.\");\n      localStorage.removeItem(\"auth\");\n      window.location.href = \"/login\";\n    }\n    throw error;\n  }\n};","map":{"version":3,"names":["axios","BASE_URL","getAuthHeaders","auth","localStorage","getItem","Error","Authorization","getPatients","response","get","headers","data","error","console","status","alert","removeItem","window","location","href","deletePatient","id","delete"],"sources":["C:/Users/sinim/hospital-frontend/src/components/PatientService.js"],"sourcesContent":["// src/services/PatientService.js\r\nimport axios from \"axios\";\r\n\r\nconst BASE_URL = \"http://localhost:8080/api/patients\";\r\n\r\n// ✅ Get credentials from localStorage (after login)\r\nconst getAuthHeaders = () => {\r\n  const auth = localStorage.getItem(\"auth\");\r\n  if (!auth) {\r\n    throw new Error(\"No authentication found. Please log in.\");\r\n  }\r\n  return {\r\n    Authorization: `Basic ${auth}`,\r\n    \"Content-Type\": \"application/json\",\r\n  };\r\n};\r\n\r\n// ✅ Fetch patients with authentication\r\nexport const getPatients = async () => {\r\n  try {\r\n    const response = await axios.get(BASE_URL, {\r\n      headers: getAuthHeaders(),\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Error fetching patients:\", error);\r\n    if (error.response && error.response.status === 401) {\r\n      alert(\"Unauthorized. Please log in.\");\r\n      localStorage.removeItem(\"auth\");          // Clear invalid auth\r\n      window.location.href = \"/login\";          // Redirect to login\r\n    }\r\n    throw error;\r\n  }\r\n};\r\n\r\n// ✅ Delete patient with authentication\r\nexport const deletePatient = async (id) => {\r\n  try {\r\n    await axios.delete(`${BASE_URL}/${id}`, {\r\n      headers: getAuthHeaders(),\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Error deleting patient:\", error);\r\n    if (error.response && error.response.status === 401) {\r\n      alert(\"Unauthorized. Please log in.\");\r\n      localStorage.removeItem(\"auth\");\r\n      window.location.href = \"/login\";\r\n    }\r\n    throw error;\r\n  }\r\n};\r\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,QAAQ,GAAG,oCAAoC;;AAErD;AACA,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAC3B,MAAMC,IAAI,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;EACzC,IAAI,CAACF,IAAI,EAAE;IACT,MAAM,IAAIG,KAAK,CAAC,yCAAyC,CAAC;EAC5D;EACA,OAAO;IACLC,aAAa,EAAE,SAASJ,IAAI,EAAE;IAC9B,cAAc,EAAE;EAClB,CAAC;AACH,CAAC;;AAED;AACA,OAAO,MAAMK,WAAW,GAAG,MAAAA,CAAA,KAAY;EACrC,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,GAAG,CAACT,QAAQ,EAAE;MACzCU,OAAO,EAAET,cAAc,CAAC;IAC1B,CAAC,CAAC;IACF,OAAOO,QAAQ,CAACG,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;IAChD,IAAIA,KAAK,CAACJ,QAAQ,IAAII,KAAK,CAACJ,QAAQ,CAACM,MAAM,KAAK,GAAG,EAAE;MACnDC,KAAK,CAAC,8BAA8B,CAAC;MACrCZ,YAAY,CAACa,UAAU,CAAC,MAAM,CAAC,CAAC,CAAU;MAC1CC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ,CAAC,CAAU;IAC5C;IACA,MAAMP,KAAK;EACb;AACF,CAAC;;AAED;AACA,OAAO,MAAMQ,aAAa,GAAG,MAAOC,EAAE,IAAK;EACzC,IAAI;IACF,MAAMtB,KAAK,CAACuB,MAAM,CAAC,GAAGtB,QAAQ,IAAIqB,EAAE,EAAE,EAAE;MACtCX,OAAO,EAAET,cAAc,CAAC;IAC1B,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOW,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IAC/C,IAAIA,KAAK,CAACJ,QAAQ,IAAII,KAAK,CAACJ,QAAQ,CAACM,MAAM,KAAK,GAAG,EAAE;MACnDC,KAAK,CAAC,8BAA8B,CAAC;MACrCZ,YAAY,CAACa,UAAU,CAAC,MAAM,CAAC;MAC/BC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;IACjC;IACA,MAAMP,KAAK;EACb;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}